# README â€” Voz Agente Gmail (MVP actualizado)

## ğŸš€ DescripciÃ³n
Este proyecto implementa un **asistente de voz para Gmail** que permite consultar, resumir y priorizar correos electrÃ³nicos de manera simple. Se ejecuta en entorno local y puede funcionar con:

- **Modo fake** â†’ usando `emails_home.json` como dataset de prueba.
- **Modo real** â†’ conectado a la API de Gmail mediante OAuth.

Toda la configuraciÃ³n estÃ¡ centralizada en **`config.json`**, lo que elimina la necesidad de variables de entorno manuales.

---

## ğŸ“‚ Estructura del proyecto

```
voz_agente_gmail/
â”‚
â”œâ”€â”€ main.py                 # Flask app principal
â”œâ”€â”€ config.json             # ConfiguraciÃ³n centralizada
â”œâ”€â”€ utils/config.py         # Cargador de configuraciÃ³n
â”œâ”€â”€ utils/importance.py     # HeurÃ­stica de correos importantes
â”œâ”€â”€ utils/summarizer.py     # Resumen de correos con LLM
â”œâ”€â”€ core/gmail/leer.py      # Lectura de correos desde Gmail
â”œâ”€â”€ core/action_router.py   # Orquestador de acciones
â”œâ”€â”€ interfaces/             # Endpoints Flask (comando_api, gmail, auth)
â””â”€â”€ tests/fixtures/         # Fixtures de correos y contactos fake
```

---

## âš™ï¸ ConfiguraciÃ³n

Toda la configuraciÃ³n vive en **`config.json`**:

```json
{
  "app": {
    "host": "127.0.0.1",
    "port": 8000,
    "secret_key": "clave_secreta_123"
  },
  "llm": {
    "mode": "local",
    "local_model_path": "./models/Qwen2.5-3B-Instruct.Q4_K_M.gguf"
  },
  "gmail": {
    "scopes": ["gmail.readonly", "gmail.modify"],
    "fake_emails_path": "tests/fixtures/emails_home.json",
    "fake_contacts_path": "tests/fixtures/contacts_retail.json",
    "max_results": 10
  },
  "importance": {
    "recency_half_life_h": 24,
    "keyword_weights": {
      "urgente": 18,
      "vencimiento": 14,
      "rechazo de pago": 14,
      "respuesta requerida": 12,
      "reuniÃ³n": 6,
      "hoy": 5
    },
    "important_senders": [
      "ceo@home.cl",
      "@cliente-grande.com",
      "finanzas@home.cl"
    ]
  }
}
```

---

## â–¶ï¸ EjecuciÃ³n

1. Instalar dependencias:
   ```bash
   pip install -r requirements.txt
   ```

2. Ejecutar en modo **fake Gmail**:
   ```bash
   python main.py
   ```

   Esto levanta el servidor en:
   [http://127.0.0.1:8000](http://127.0.0.1:8000)

3. Probar desde el frontend (interfaz web) con comandos como:
   - **"ResÃºmeme los correos"**
   - **"Tengo correos importantes?"**
   - **"CuÃ¡ntos correos no leÃ­dos tengo?"**
   - **"QuiÃ©n me escribiÃ³ hoy?"**

---

## ğŸ§  Funcionalidades implementadas (Fase 1 + 2)

- `remitentes_hoy` â†’ lista remitentes de hoy.
- `contar_no_leidos` â†’ cuenta no leÃ­dos en Primary.
- `resumen_hoy` â†’ resume correos con LLM, con **chunking real**.
- `correos_importantes` â†’ pondera urgencia segÃºn remitente, palabras clave y antigÃ¼edad.

---

## ğŸ”® PrÃ³ximos pasos (Fase 3)

- Integrar contactos y calendario.
- Mejorar UX del frontend.
- Ajustar heurÃ­stica con feedback real.
- Optimizar latencia de resÃºmenes en hilos largos.

---

## ğŸ‘¨â€ğŸ’» Desarrollo

Este proyecto sigue los principios:
- **Simple**: configuraciÃ³n Ãºnica en `config.json`.
- **Modular**: cada funciÃ³n vive en su archivo.
- **Escalable**: se puede pasar de fake Gmail a real Gmail sin tocar cÃ³digo.
- **Limpio**: sin dependencias innecesarias.

---

âœ‰ï¸ Hecho con foco en productividad y simplicidad.

